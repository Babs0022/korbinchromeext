(()=>{"use strict";chrome.runtime.onMessage.addListener((e,t,r)=>{if("get_dom"===e.action)return r({dom:document.documentElement.outerHTML}),!0;if("execute_action"===e.action){const{action:t,details:n}=e.payload;try{if("click"===t){const e=document.querySelector(n.selector);if(!(e instanceof HTMLElement))throw new Error(`Element not found for selector: ${n.selector}`);e.click(),r({status:"success",message:`Clicked element with selector: ${n.selector}`})}else{if("type"!==t)throw new Error(`Unsupported action: ${t}`);{const e=document.querySelector(n.selector);if(!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))throw new Error(`Input element not found for selector: ${n.selector}`);e.value=n.text,e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),r({status:"success",message:`Typed text into element with selector: ${n.selector}`})}}}catch(e){r({status:"error",error:e instanceof Error?e.message:"An unknown error occurred."})}return!0}return!0})})();